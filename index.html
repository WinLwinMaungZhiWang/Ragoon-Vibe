<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>3D Flipbook Single Page</title>

<!-- Include 3D FlipBook (embedded directly, no download needed) -->
<script>
// 3D FlipBook library (very small embedded version)
class FlipBook {
    constructor(container, pages) {
        this.container = container;
        this.pages = pages;
        this.current = 0;

        container.style.perspective = "2000px";
        container.style.overflow = "hidden";
        container.style.position = "relative";

        this.page = document.createElement("div");
        this.page.style.width = "100%";
        this.page.style.height = "100%";
        this.page.style.transformStyle = "preserve-3d";
        this.page.style.transition = "transform 0.8s ease";

        this.img = document.createElement("img");
        this.img.src = pages[0];
        this.img.style.width = "100%";
        this.img.style.height = "100%";
        this.img.style.objectFit = "cover";
        this.img.style.position = "absolute";

        this.page.appendChild(this.img);
        container.appendChild(this.page);

        container.addEventListener("click", () => this.next());
        container.addEventListener("swipeleft", () => this.next());
        container.addEventListener("swiperight", () => this.prev());
    }

    next() {
        if (this.current >= this.pages.length - 1) return;

        this.page.style.transform = "rotateY(-180deg)";
        setTimeout(() => {
            this.current++;
            this.img.src = this.pages[this.current];
            this.page.style.transform = "rotateY(0deg)";
        }, 400);
    }

    prev() {
        if (this.current <= 0) return;

        this.page.style.transform = "rotateY(180deg)";
        setTimeout(() => {
            this.current--;
            this.img.src = this.pages[this.current];
            this.page.style.transform = "rotateY(0deg)";
        }, 400);
    }
}

// Mobile touch swipe detector
function addSwipeListener(el, callbackLeft, callbackRight) {
    let xStart = null;

    el.addEventListener("touchstart", (e) => {
        xStart = e.touches[0].clientX;
    });

    el.addEventListener("touchend", (e) => {
        if (!xStart) return;
        let xEnd = e.changedTouches[0].clientX;

        if (xStart - xEnd > 50) callbackLeft();   // swipe left
        if (xEnd - xStart > 50) callbackRight();  // swipe right

        xStart = null;
    });
}
</script>

<style>
body {
    margin: 0;
    background: black;
    overflow: hidden;
}

#book {
    width: 100vw;
    height: 100vh;
    position: relative;
}
</style>

</head>
<body>

<div id="book"></div>

<script>
let pages = [
    "images/page1.png",
    "images/page2.png",
    "images/page3.png",
    "images/page4.png"
];

let book = new FlipBook(document.getElementById("book"), pages);

// Enable swipe for mobile
addSwipeListener(
    document.getElementById("book"),
    () => book.next(),
    () => book.prev()
);
</script>

</body>
</html>
